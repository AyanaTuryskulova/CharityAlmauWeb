{% extends 'base.html' %}
{% load static %}

{% block title %}–î–µ—Ç–∞–ª–∏ —Ç–æ–≤–∞—Ä–∞{% endblock %}

{% block content %}
<div class="product-detail">


    <h2>{{ product.title }}</h2>
    {% if product.image %}
        <img src="{{ product.image.url }}" alt="{{ product.title }}" class="product-image">
    {% else %}
        <div class="product-image" style="background: #ddd; display: flex; align-items: center; justify-content: center; color: #999; min-height: 200px;">–ù–µ—Ç —Ñ–æ—Ç–æ</div>
    {% endif %}

    <p><strong>–û–ø–∏—Å–∞–Ω–∏–µ:</strong> {{ product.description }}</p>
    <p><strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong> {{ product.phone }}</p>
    <p><strong>–ò–º—è:</strong> {{ product.name }}</p>

    <p><strong>–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</strong>
        {% if product.main_category %}{{ product.main_category.name }}{% endif %}
        {% if product.subcategory %} ‚Üí {{ product.subcategory.name }}{% endif %}
        {% if product.sub_subcategory %} ‚Üí {{ product.sub_subcategory.name }}{% endif %}
    </p>

    <p><strong>–¢–∏–ø:</strong> {{ product.get_type_display }}</p>
    <p><strong>–ê–≤—Ç–æ—Ä:</strong> @{{ product.user.username }}</p>

    {% if product.user != request.user %}
        <a href="{% url 'start_chat' product.user.id %}?product_id={{ product.id }}" class="action-button" style="background-color: #024080; color: white; text-decoration: none; display: inline-block; margin-right: 10px;">
            –ù–∞–ø–∏—Å–∞—Ç—å –≤–ª–∞–¥–µ–ª—å—Ü—É
        </a>
        
        {% if product.type == 'rental' %}
            <form method="post" action="{% url 'create_rental' %}" style="display: inline-block; margin-right: 10px;">
                {% csrf_token %}
                <input type="hidden" name="product_id" value="{{ product.id }}">
                <button type="submit" class="action-button" style="background-color: #28a745; color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer;">
                    –ê—Ä–µ–Ω–¥–æ–≤–∞—Ç—å
                </button>
            </form>
        {% endif %}
    {% endif %}
    
    {% if product.type == 'free' %}
    <a href="{% url 'product_action' product.id 'take' %}" class="action-button">
        –ó–∞–±—Ä–∞—Ç—å
    </a>
    {% elif product.type == 'exchange' %}
    <a href="{% url 'product_action' product.id 'exchange' %}" class="action-button">
        –û–±–º–µ–Ω—è—Ç—å—Å—è
    </a>
    {% elif product.type == 'rental' %}
    <div style="margin-top: 10px; padding: 10px; background: #e7f3ff; border-radius: 8px; color: #024080;">
        üí° –≠—Ç–æ—Ç —Ç–æ–≤–∞—Ä –¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è –∞—Ä–µ–Ω–¥—ã
    </div>
    {% endif %}
</div>

<style>
    .product-detail {
        max-width: 600px;
        margin: auto;
        padding: 20px;
        background: #f9f9f9;
        border-radius: 12px;
    }

    .product-detail h2 {
        text-align: center;
    }



    .product-image {
        width: 100%;
        height: auto;
        border-radius: 8px;
    }

    .back-button {
        display: inline-block;
        margin-bottom: 10px;
        color: #333;
        text-decoration: none;
        font-size: 14px;
    }

    .action-button {
        margin-top: 20px;
        padding: 10px 20px;
        background-color: #ffffff;
        color: #00284f;
        border: none;
        border-radius: 8px;
        cursor: pointer;
    }
</style>
{% endblock %}